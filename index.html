<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio + Game</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Game Canvas Styles */
    #gameCanvas {
      background: #1f2937;
      display: block;
      margin: 0 auto;
      touch-action: none;
      border: 2px solid #8b5cf6;
      border-radius: 0.5rem;
    }
    
    /* Button Position Fix */
    #gameContainer {
      position: relative;
    }
    #startBtn {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
    }
  </style>
</head>
<body class="bg-gradient-to-b from-gray-900 to-purple-900 text-white">
  <!-- Projects Section --> 
  <section class="container mx-auto px-4 py-12">
    <!-- ... your project cards ... -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      <!-- Project 1 -->
      <div class="project-card bg-gray-800 rounded-xl p-6 shadow-lg fade-in" style="animation-delay: 0.1s">
        <h3 class="text-2xl font-bold mb-3">AI Chatbot</h3>
        <p class="text-gray-300 mb-4">Natural language processing chatbot built with Python and TensorFlow.</p>
        <a href="#" class="inline-block px-5 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg transition">View Project</a>
      </div>
    </div>
  </section>

  <!-- Game Section -->
  <section class="py-12">
    <div class="mx-auto px-4 max-w-md">
      <h2 class="text-3xl font-bold mb-6 text-center">Mini Game</h2>
      <div id="gameContainer" class="bg-gray-800 rounded-xl p-4 relative">
        <!-- Canvas akan auto-resize -->
        <canvas id="gameCanvas" width="400" height="300"></canvas>
        <!-- Button Tengah -->
        <button id="startBtn" class="px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg shadow-lg transition">
          START GAME
        </button>
        <p id="score" class="text-lg mt-4 text-center">Score: 0 | High: 0</p>
      </div>
    </div>
  </section>

  <script>
    // ===== GAME CODE =====
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const startBtn = document.getElementById('startBtn');
    const scoreElement = document.getElementById('score');
    
    // Game variables
    let score = 0, highScore = 0, gameActive = false;
    let target = { x: 0, y: 0, radius: 15 };

    // Draw functions
    function drawTarget() {
      ctx.beginPath();
      ctx.arc(target.x, target.y, target.radius, 0, Math.PI * 2);
      ctx.fillStyle = '#ef4444';
      ctx.fill();
    }

    function showStartScreen() {
      ctx.fillStyle = 'rgba(31, 41, 55, 0.8)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = 'white';
      ctx.font = '20px Arial';
      ctx.textAlign = 'center';
      ctx.fillText('Click START to play!', canvas.width/2, canvas.height/2 - 20);
    }

    function startGame() {
      score = 0;
      gameActive = true;
      startBtn.style.display = 'none';
      scoreElement.textContent = `Score: ${score} | High: ${highScore}`;
      spawnTarget();
    }

    function spawnTarget() {
      target = {
        x: 15 + Math.random() * (canvas.width - 30),
        y: 15 + Math.random() * (canvas.height - 30),
        radius: 15
      };
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawTarget();
    }

    function endGame() {
      gameActive = false;
      highScore = Math.max(highScore, score);
      startBtn.textContent = 'PLAY AGAIN';
      startBtn.style.display = 'block';
      showStartScreen();
    }

    // Event listeners
    startBtn.addEventListener('click', startGame);

    canvas.addEventListener('click', (e) => {
      if (!gameActive) return;
      
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      
      // Check hit
      const distance = Math.sqrt((x - target.x) ** 2 + (y - target.y) ** 2);
      
      if (distance < target.radius) {
        score++;
        scoreElement.textContent = `Score: ${score} | High: ${highScore}`;
        spawnTarget();
      } else {
        endGame();
      }
    });

    // Mobile touch support
    canvas.addEventListener('touchend', (e) => {
      e.preventDefault();
      const touch = e.changedTouches[0];
      const mouseEvent = new MouseEvent('click', {
        clientX: touch.clientX,
        clientY: touch.clientY
      });
      canvas.dispatchEvent(mouseEvent);
    });

    // Initialize
    showStartScreen();
  </script>
</body>
</html>
